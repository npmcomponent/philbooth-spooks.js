(function(){"use strict";function t(e){var t,o=e.archetype,u=e.spook||{},a=e.results||{};if(n(o)&&r(o))throw new Error("Invalid archetype");if(n(e.log))throw new Error("Invalid log");for(t in o)o.hasOwnProperty(t)&&i(o[t])&&(u[t]=s({name:t,log:e.log,result:a[t]}));return u}function n(e){return typeof e!="object"||e===null}function r(e){return i(e)===!1}function i(e){return typeof e=="function"}function s(e){var t=e.name,n=e.chain,r=e.log,i=e.result;if(typeof t!="string")throw new Error("Invalid function name");return o(r,t,{counts:0,args:[],these:[]}),function(){return f(t,r,arguments,this),n===!0?this:i}}function o(e,t,n){var r;for(r in n)n.hasOwnProperty(r)&&u(e,r,t,n[r])}function u(e,t,n,r){a(e,t,{}),a(e[t],n,r)}function a(e,t,n){typeof e[t]=="undefined"&&(e[t]=n)}function f(e,t,n,r){t.counts[e]+=1,t.args[e].push(n),t.these[e].push(r)}var e={obj:t,fn:s};module&&module.exports?module.exports=e:window.spooks=e})();