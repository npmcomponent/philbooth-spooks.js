(function(){"use strict";function t(e){var t,o=e.archetype,u=e.spook||{};if(n(o)&&r(o))throw new Error("Invalid archetype");if(n(e.log))throw new Error("Invalid log");for(t in o)o.hasOwnProperty(t)&&i(o[t])&&(u[t]=s({name:t,log:e.log,result:e.result}));return u}function n(e){return typeof e!="object"||e===null}function r(e){return i(e)===!1}function i(e){return typeof e=="function"}function s(e){var t=e.name,n=e.chain,r=e.log,i=e.result;if(typeof t!="string")throw new Error("Invalid function name");return o(r,"counts",{}),o(r.counts,t,0),o(r,"args",{}),o(r.args,t,[]),function(){return u(t,r,arguments),n===!0?this:i}}function o(e,t,n){typeof e[t]=="undefined"&&(e[t]=n)}function u(e,t,n){t.counts[e]+=1,t.args[e].push(n)}var e={obj:t,fn:s};module&&module.exports?module.exports=e:window.spooks=e})();